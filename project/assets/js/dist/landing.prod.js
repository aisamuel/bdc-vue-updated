"use strict";var transactionApp=new Vue({el:"#landingApp",data:{bankAccounts:[],userBankAccounts:[],exchangeRates:[],sellingRates:[],buyingRates:[],userSelectedBankAccount:{accountNumber:"",accountName:"",bankName:""},userProfile:{},selectedCurrency:{},amountInCurrency:null,amountInNaira:null,randomString:"",bankAccountsURL:"reg/accounts",exchangeRatesURL:"fx/all-currency/",addBankURL:"reg/addBank/",userBankAccountsURL:"reg/user-bank/",activeMode:"buy",paymentMethod:"card",acceptAgreement:!1,accountIsUnique:!0},methods:{fetchBDCBankAccounts:function(){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("".concat(baseURL).concat(this.bankAccountsURL),{mode:"cors"}));case 2:if(t=e.sent)return e.next=6,regeneratorRuntime.awrap(t.json());e.next=8;break;case 6:n=e.sent,console.log(n);case 8:case"end":return e.stop()}},null,this)},fetchExchangeRates:function(){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("".concat(baseURL).concat(this.exchangeRatesURL),{mode:"cors"}));case 2:if(t=e.sent)return e.next=6,regeneratorRuntime.awrap(t.json());e.next=12;break;case 6:(n=e.sent)&&(this.exchangeRates=n),this.selectedCurrency=this.exchangeRates[0],this.sellingRates=JSON.parse(JSON.stringify(this.exchangeRates)),this.buyingRates=JSON.parse(JSON.stringify(this.exchangeRates)),console.log("exchange rates",this.exchangeRates);case 12:case"end":return e.stop()}},null,this)},addBankAccount:function(){var t,n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t={accountNumber:this.userSelectedBankAccount.accountNumber,accountName:this.userSelectedBankAccount.accountName,bankName:this.userSelectedBankAccount.bankName,token:getToken()},e.next=3,regeneratorRuntime.awrap(fetch("".concat(baseURL).concat(this.addBankURL).concat(this.userProfile._id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}));case 3:if(n=e.sent)return e.next=7,regeneratorRuntime.awrap(n.json());e.next=9;break;case 7:a=e.sent,console.log(a);case 9:case"end":return e.stop()}},null,this)},fetchUserAccounts:function(){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("".concat(baseURL).concat(this.userBankAccountsURL).concat(this.userProfile._id),{mode:"cors"}));case 2:if(t=e.sent)return e.next=6,regeneratorRuntime.awrap(t.json());e.next=9;break;case 6:n=e.sent,console.log(n),this.userBankAccounts=n.bank;case 9:case"end":return e.stop()}},null,this)},generateRandomString:function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},convertCurrency:function(e){!(0<arguments.length&&void 0!==e)||e?this.amountInNaira=this.selectedCurrency.rateToNaira*this.amountInCurrency:this.amountInCurrency=this.amountInNaira/this.selectedCurrency.rateToNaira},switchMode:function(e){var t=0<arguments.length&&void 0!==e?e:"buy";this.activeMode=t,console.log("switching mode",t),(t="buy")?this.exchangeRates=JSON.parse(JSON.stringify(this.buyingRates)):this.exchangeRates=JSON.parse(JSON.stringify(this.sellingRates)),this.convertCurrency()},checkAccountIsUnique:function(){var t=this;this.accountIsUnique=!0,this.userBankAccounts.find(function(e){console.log(e),Number(e.accountNumber)===Number(t.userSelectedBankAccount.accountNumber)?(console.log("Account is not unique"),t.accountIsUnique=!1):console.log("Account is unique")})},payWithPaystack:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){payWithPaystack(this.userProfile,this.amountInNaira,this.randomString,this.generateRandomString)}),switchPaymentMethod:function(){}},mounted:function(){this.logout=logout,this.randomString=this.generateRandomString(),this.getUserProfile=getUserProfile,this.getUserProfile()&&(this.userProfile=this.getUserProfile()),this.fetchExchangeRates(),this.fetchUserAccounts()}});